---
title: ë¸”ë¡œê·¸ì— í¬ìŠ¤íŠ¸ ì•”í˜¸í™” ê¸°ëŠ¥ ë§Œë“¤ê¸°
date: 2025-10-20 22:39:35 +0900
categories: [ê°œë°œ]
tags: [ê°œë°œ, ë¸”ë¡œê·¸]
image:
  path: /img/2025-10-20-ë¸”ë¡œê·¸ì—-í¬ìŠ¤íŠ¸-ì•”í˜¸í™”-ê¸°ëŠ¥-ë§Œë“¤ê¸°/image.png
  alt: "alt text"
---


ë¸”ë¡œê·¸ì— ê¸°ë¡ì„ ë‚¨ê¸°ë‹¤ ë³´ë©´ ë¯¼ê°í•œ ê°œì¸ì •ë³´ê°€ ë“¤ì–´ê°„ ë‚´ìš©ì„ ë‚¨ê²¨ì•¼ í•  ë•Œë„ ìƒê¸¸ ìˆ˜ ìˆë‹¤.

ê·¸ëŸ´ ë•Œë¥¼ ìœ„í•´ ë¸”ë¡œê·¸ì— ì•”í˜¸í™” ë° ë³µí˜¸í™” ê¸°ëŠ¥ì„ ì¶”ê°€í•˜ì.

CryptoJSì˜ AES ì•”í˜¸í™” ë°©ì‹ì„ ì“°ê²Œ í•œ ë’¤ í¬ìŠ¤íŠ¸ë¥¼ ì½ì„ ë•Œ í‚¤ë¥¼ ì…ë ¥í•´ì„œ ë³µí˜¸í™”í•˜ëŠ” ë²„íŠ¼ì„ ë„£ëŠ” ì‹ìœ¼ë¡œ êµ¬í˜„í•˜ë©´ ë˜ê² ì§€.

ì œë¯¸ë‹ˆì—ê²Œ ì•”í˜¸í™” ë°©ë²•ì„ ì œì•ˆí•˜ê³  ì–´ë–»ê²Œ êµ¬í˜„í•˜ëŠ”ì§€ ì§€ì¼œë³´ì.

### ì œë¯¸ë‹ˆ 2.5 Proì˜ ê²°ê³¼ë¬¼

<details markdown="1">
<summary>ì ‘ê¸°/í´ê¸°</summary>

ì•Œê² ìŠµë‹ˆë‹¤. ì œê³µí•´ì£¼ì‹  `Chirpy` í…Œë§ˆì˜ `post.html` ë ˆì´ì•„ì›ƒì„ ê¸°ë°˜ìœ¼ë¡œ ì•”í˜¸í™”/ë³µí˜¸í™” ê¸°ëŠ¥ì„ ì™„ë²½í•˜ê²Œ í†µí•©í•œ ì½”ë“œë¥¼ ì‘ì„±í•´ ë“œë¦¬ê² ìŠµë‹ˆë‹¤.

ê¸°ì¡´ ë ˆì´ì•„ì›ƒì˜ êµ¬ì¡°ì™€ ìŠ¤íƒ€ì¼ì„ ê·¸ëŒ€ë¡œ ìœ ì§€í•˜ë©´ì„œ, ì•”í˜¸í™”ëœ í¬ìŠ¤íŠ¸ì¼ ê²½ìš°ì—ë§Œ ë³¸ë¬¸ ì˜ì—­(`div.content`)ì„ ë™ì ìœ¼ë¡œ êµì²´í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ êµ¬í˜„í•©ë‹ˆë‹¤.

### ìˆ˜ì •ëœ `_layouts/post.html`

ì•„ë˜ ì½”ë“œë¥¼ ê¸°ì¡´ `_layouts/post.html` íŒŒì¼ì˜ ë‚´ìš©ê³¼ í†µì§¸ë¡œ ë°”ê¾¸ì‹œë©´ ë©ë‹ˆë‹¤.

```html
---
layout: default
refactor: true
panel_includes:
  - toc
tail_includes:
  - related-posts
  - post-nav
script_includes:
  - comment
---

{% include lang.html %} {% include toc-status.html %}

<article class="px-1" data-toc="{{ enable_toc }}">
  <header>
    <h1 data-toc-skip>{{ page.title }}</h1>
    {% if page.description %}
    <p class="post-desc fw-light mb-4">{{ page.description }}</p>
    {% endif %}

    <div class="post-meta text-muted">
      <!-- ... ê¸°ì¡´ headerì˜ meta ì •ë³´ëŠ” ê·¸ëŒ€ë¡œ ìœ ì§€ ... -->
      <span>
        {{ site.data.locales[lang].post.posted }} {% include datetime.html
        date=page.date tooltip=true lang=lang %}
      </span>
      {% if page.last_modified_at and page.last_modified_at != page.date %}
      <span>
        {{ site.data.locales[lang].post.updated }} {% include datetime.html
        date=page.last_modified_at tooltip=true lang=lang %}
      </span>
      {% endif %}
      <div class="d-flex justify-content-between">
        <span>
          {% if page.author %} {% assign authors = page.author %} {% elsif
          page.authors %} {% assign authors = page.authors %} {% endif %} {{
          site.data.locales[lang].post.written_by }}
          <em>
            {% if authors %} {% for author in authors %} {% if
            site.data.authors[author].url -%}
            <a href="{{ site.data.authors[author].url }}"
              >{{ site.data.authors[author].name }}</a
            >
            {%- else -%} {{ site.data.authors[author].name }} {%- endif %} {%
            unless forloop.last %}{{ '</em
          >,
          <em
            >' }}{% endunless %} {% endfor %} {% else %}
            <a href="{{ site.social.links[0] }}">{{ site.social.name }}</a>
            {% endif %}
          </em>
        </span>
        <div>
          {% if site.pageviews.provider and
          site.analytics[site.pageviews.provider].id %}
          <span>
            <em id="pageviews">
              <i class="fas fa-spinner fa-spin small"></i>
            </em>
            {{ site.data.locales[lang].post.pageview_measure }}
          </span>
          {% endif %}
          {% include read-time.html content=content prompt=true lang=lang %}
        </div>
      </div>
    </div>
  </header>
  
  {% comment %} ----- â–¼â–¼â–¼ ì•”í˜¸í™” ë¡œì§ ì‹œì‘ â–¼â–¼â–¼ ----- {% endcomment %}
  
  {% if page.encrypt %}
  <!-- [ì•”í˜¸í™”ëœ í¬ìŠ¤íŠ¸] -->
  <!-- TOC ê´€ë ¨ êµ¬ì¡°ëŠ” ê·¸ëŒ€ë¡œ ìœ ì§€í•©ë‹ˆë‹¤. -->
  {% if enable_toc %}
    <div id="toc-bar" class="d-flex align-items-center justify-content-between invisible">
      <span class="label text-truncate">{{ page.title }}</span>
      <button type="button" class="toc-trigger btn me-1"><i class="fa-solid fa-list-ul fa-fw"></i></button>
    </div>
    <button id="toc-solo-trigger" type="button" class="toc-trigger btn btn-outline-secondary btn-sm">
      <span class="label ps-2 pe-1">{{- site.data.locales[lang].panel.toc -}}</span>
      <i class="fa-solid fa-angle-right fa-fw"></i>
    </button>
    <dialog id="toc-popup" class="p-0">
      <div class="header d-flex flex-row align-items-center justify-content-between">
        <div class="label text-truncate py-2 ms-4">{{- page.title -}}</div>
        <button id="toc-popup-close" type="button" class="btn mx-1 my-1 opacity-75"><i class="fas fa-close"></i></button>
      </div>
      <div id="toc-popup-content" class="px-4 py-3 pb-4"></div>
    </dialog>
  {% endif %}

  <!-- ë³¸ë¬¸ ì˜ì—­ì„ ë³µí˜¸í™” UIë¡œ êµì²´ -->
  <div class="content">
    <div id="decryption-wrapper" class="text-center p-4 border rounded">
      <i class="fa-solid fa-lock fa-2x mb-3"></i>
      <p class="mb-3">ì´ í¬ìŠ¤íŠ¸ëŠ” ì•”í˜¸í™”ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ë‚´ìš©ì„ ë³´ë ¤ë©´ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”.</p>
      <div class="input-group mb-3 mx-auto" style="max-width: 300px;">
        <input type="password" id="password-input" class="form-control" placeholder="ë¹„ë°€ë²ˆí˜¸" aria-label="Password">
        <button id="decrypt-button" class="btn btn-primary" type="button">í™•ì¸</button>
      </div>
      <p id="error-message" class="text-danger small" style="display: none;">ë¹„ë°€ë²ˆí˜¸ê°€ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤.</p>
    </div>
    <!-- ì•”í˜¸í™”ëœ ë³¸ë¬¸ì„ Javascriptì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ ìˆ¨ê²¨ë‘¡ë‹ˆë‹¤. -->
    <div id="encrypted-data" style="display:none;">{{ content }}</div>
    <!-- ë³µí˜¸í™”ëœ ë‚´ìš©ì´ ì—¬ê¸°ì— ì‚½ì…ë©ë‹ˆë‹¤. -->
    <div id="decrypted-content" style="display: none;"></div>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      if (document.getElementById('decryption-wrapper')) {
        const decryptButton = document.getElementById('decrypt-button');
        const passwordInput = document.getElementById('password-input');
        const encryptedData = document.getElementById('encrypted-data').innerHTML.trim();
        
        const decryptAndDisplay = () => {
          const secretKey = passwordInput.value;
          const errorMessage = document.getElementById('error-message');
          
          if (!secretKey) return;

          try {
            const decryptedBytes = CryptoJS.AES.decrypt(encryptedData, secretKey);
            const decryptedText = decryptedBytes.toString(CryptoJS.enc.Utf8);
            
            if (decryptedText) {
              const decryptedContent = document.getElementById('decrypted-content');
              decryptedContent.innerHTML = decryptedText;
              
              document.getElementById('decryption-wrapper').style.display = 'none';
              decryptedContent.style.display = 'block';

              // Chirpy í…Œë§ˆì˜ TOC(Table of Contents) ìŠ¤í¬ë¦½íŠ¸ë¥¼ ìˆ˜ë™ìœ¼ë¡œ ë‹¤ì‹œ ì´ˆê¸°í™”
              if (typeof window.toc !== 'undefined') {
                window.toc.init();
              }
            } else {
              throw new Error('Decryption resulted in empty content.');
            }
          } catch (e) {
            errorMessage.style.display = 'block';
            passwordInput.focus();
            console.error('Decryption failed:', e);
          }
        };

        decryptButton.addEventListener('click', decryptAndDisplay);
        passwordInput.addEventListener('keyup', (event) => {
          if (event.key === "Enter") {
            decryptButton.click();
          }
        });
      }
    });
  </script>

  {% else %}
  <!-- [ì¼ë°˜ í¬ìŠ¤íŠ¸] -->
  
    {% if enable_toc %}
      <div id="toc-bar" class="d-flex align-items-center justify-content-between invisible">
        <span class="label text-truncate">{{ page.title }}</span>
        <button type="button" class="toc-trigger btn me-1"><i class="fa-solid fa-list-ul fa-fw"></i></button>
      </div>
      <button id="toc-solo-trigger" type="button" class="toc-trigger btn btn-outline-secondary btn-sm">
        <span class="label ps-2 pe-1">{{- site.data.locales[lang].panel.toc -}}</span>
        <i class="fa-solid fa-angle-right fa-fw"></i>
      </button>
      <dialog id="toc-popup" class="p-0">
        <div class="header d-flex flex-row align-items-center justify-content-between">
          <div class="label text-truncate py-2 ms-4">{{- page.title -}}</div>
          <button id="toc-popup-close" type="button" class="btn mx-1 my-1 opacity-75"><i class="fas fa-close"></i></button>
        </div>
        <div id="toc-popup-content" class="px-4 py-3 pb-4"></div>
      </dialog>
    {% endif %}

    <div class="content">{{ content }}</div>
  {% endif %}
  {% comment %} ----- â–²â–²â–² ì•”í˜¸í™” ë¡œì§ ì¢…ë£Œ â–²â–²â–² ----- {% endcomment %}

  <div class="post-tail-wrapper text-muted">
    <!-- ... ê¸°ì¡´ post-tail-wrapper ë‚´ìš© (categories, tags ë“±)ì€ ê·¸ëŒ€ë¡œ ìœ ì§€ ... -->
    {% if page.categories.size > 0 %}
    <div class="post-meta mb-3">
      <i class="far fa-folder-open fa-fw me-1"></i>
      {% for category in page.categories %}
      <a href="{{ site.baseurl }}/categories/{{ category | slugify | url_encode }}/">{{ category }}</a>
      {%- unless forloop.last -%},{%- endunless -%} {% endfor %}
    </div>
    {% endif %}
    {% if page.tags.size > 0 %}
    <div class="post-tags">
      <i class="fa fa-tags fa-fw me-1"></i>
      {% for tag in page.tags %}
      <a href="{{ site.baseurl }}/tags/{{ tag | slugify | url_encode }}/" class="post-tag no-text-decoration">{{- tag -}}</a>
      {% endfor %}
    </div>
    {% endif %}
    <div class="post-tail-bottom d-flex justify-content-between align-items-center mt-5 pb-2">
      <div class="license-wrapper">
        {% if site.data.locales[lang].copyright.license.template %} {% capture
        _replacement %}
        <a href="{{ site.data.locales[lang].copyright.license.link }}">
          {{ site.data.locales[lang].copyright.license.name }}
        </a>
        {% endcapture %} {{ site.data.locales[lang].copyright.license.template |
        replace: ':LICENSE_NAME', _replacement }} {% endif %}
      </div>
      {% include post-sharing.html lang=lang %}
    </div>
  </div>
</article>
```

### ì£¼ìš” ë³€ê²½ì  ë° ì„¤ëª…

1.  **ì „ì²´ êµ¬ì¡° ë¶„ê¸°**: `{% if page.encrypt %}` Liquid íƒœê·¸ë¥¼ ì‚¬ìš©í•˜ì—¬ í¬ìŠ¤íŠ¸ì˜ Front Matterì— `encrypt: true`ê°€ ìˆëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤.
    *   **Trueì¼ ê²½ìš°**: ì•”í˜¸í™”ëœ í¬ìŠ¤íŠ¸ë¥¼ ìœ„í•œ HTMLê³¼ Javascriptë¥¼ ë Œë”ë§í•©ë‹ˆë‹¤.
    *   **Falseì¼ ê²½ìš° (ë˜ëŠ” í•´ë‹¹ ë³€ìˆ˜ê°€ ì—†ì„ ê²½ìš°)**: ê¸°ì¡´ì˜ ì¼ë°˜ í¬ìŠ¤íŠ¸ HTML(`div.content` í¬í•¨)ì„ ê·¸ëŒ€ë¡œ ë Œë”ë§í•©ë‹ˆë‹¤.

2.  **ì¤‘ë³µ ìµœì†Œí™”**: ì•”í˜¸í™” ì—¬ë¶€ì™€ ìƒê´€ì—†ì´ ë™ì¼í•˜ê²Œ ì‚¬ìš©ë˜ëŠ” `header`ì™€ `post-tail-wrapper` ë¶€ë¶„ì€ ê·¸ëŒ€ë¡œ ë‘ê³ , ë™ì ìœ¼ë¡œ ë³€ê²½ë˜ì–´ì•¼ í•˜ëŠ” **ë³¸ë¬¸ ì˜ì—­ë§Œ ë¶„ê¸° ì²˜ë¦¬**í•˜ì—¬ ì½”ë“œì˜ ì¤‘ë³µì„ ìµœì†Œí™”í–ˆìŠµë‹ˆë‹¤. TOC ê´€ë ¨ HTMLì€ ì–‘ìª½ ëª¨ë‘ì— í¬í•¨ì‹œì¼œ êµ¬ì¡°ë¥¼ ìœ ì§€í–ˆìŠµë‹ˆë‹¤.

3.  **UI ê°œì„ **: ë³µí˜¸í™” UIì— Bootstrap í´ë˜ìŠ¤(`input-group`, `form-control`, `btn` ë“±)ì™€ Font Awesome ì•„ì´ì½˜ì„ ì‚¬ìš©í•˜ì—¬ Chirpy í…Œë§ˆì™€ ì˜ ì–´ìš¸ë¦¬ë„ë¡ ë””ìì¸í–ˆìŠµë‹ˆë‹¤.

4.  **TOC(ëª©ì°¨) ì¬ì´ˆê¸°í™”**:
    *   `Chirpy` í…Œë§ˆëŠ” í˜ì´ì§€ ë¡œë“œ ì‹œ Javascriptë¡œ ëª©ì°¨(`TOC`)ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.
    *   ì•”í˜¸í™”ëœ í¬ìŠ¤íŠ¸ëŠ” ì²˜ìŒì—ëŠ” ë³¸ë¬¸ì´ ì—†ê¸° ë•Œë¬¸ì— ëª©ì°¨ê°€ ë¹„ì–´ìˆê²Œ ë©ë‹ˆë‹¤.
    *   ë³µí˜¸í™”ì— ì„±ê³µí•˜ì—¬ ë™ì ìœ¼ë¡œ ë³¸ë¬¸(`decryptedText`)ì„ ì‚½ì…í•œ í›„, `window.toc.init()`ì„ í˜¸ì¶œí•˜ì—¬ **ëª©ì°¨ë¥¼ ë‹¤ì‹œ ìƒì„±**í•˜ë„ë¡ í–ˆìŠµë‹ˆë‹¤. ì´ ë¶€ë¶„ì´ ì—†ìœ¼ë©´ ë³µí˜¸í™” í›„ì—ë„ ëª©ì°¨ê°€ ë³´ì´ì§€ ì•ŠìŠµë‹ˆë‹¤.

5.  **ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰ ì‹œì **: `DOMContentLoaded` ì´ë²¤íŠ¸ë¥¼ ì‚¬ìš©í•˜ì—¬ HTML ë¬¸ì„œê°€ ëª¨ë‘ ë¡œë“œëœ í›„ì— ë³µí˜¸í™” ê´€ë ¨ ìŠ¤í¬ë¦½íŠ¸ê°€ ì•ˆì „í•˜ê²Œ ì‹¤í–‰ë˜ë„ë¡ í–ˆìŠµë‹ˆë‹¤.

### ìµœì¢… í™•ì¸ì‚¬í•­

1.  **`crypto-js` ë¼ì´ë¸ŒëŸ¬ë¦¬ ë¡œë“œ**: ì´ ì½”ë“œê°€ ì •ìƒì ìœ¼ë¡œ ì‘ë™í•˜ë ¤ë©´, `_layouts/default.html` ë˜ëŠ” `_includes/head.html`ì— ì•„ë˜ ì½”ë“œê°€ ë°˜ë“œì‹œ í¬í•¨ë˜ì–´ ìˆì–´ì•¼ í•©ë‹ˆë‹¤.
    ```html
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
    ```

ì´ì œ ì´ ë ˆì´ì•„ì›ƒì„ ì ìš©í•˜ë©´, `cli.js`ë¥¼ í†µí•´ ì•”í˜¸í™”í•˜ì—¬ ë°œí–‰í•œ í¬ìŠ¤íŠ¸ëŠ” ì›¹ì—ì„œ ì™„ë²½í•˜ê²Œ ë³µí˜¸í™” ê¸°ëŠ¥ì„ ì œê³µí•˜ê²Œ ë©ë‹ˆë‹¤.

ë„¤, ì•Œê² ìŠµë‹ˆë‹¤. ì§€ê¸ˆê¹Œì§€ ë…¼ì˜ëœ ëª¨ë“  ê¸°ëŠ¥(í¬ìŠ¤íŠ¸ë³„ í´ë” ê´€ë¦¬, ì´ë¯¸ì§€ CDN ë¶„ë¦¬, ê²½ë¡œ ìë™ ë³€í™˜, í—¤ë” ì´ë¯¸ì§€ ìë™ ì¶”ê°€, ì„ íƒì  ì•”í˜¸í™”)ê³¼ ì£¼ì˜ì‚¬í•­ì„ ì¢…í•©í•˜ì—¬ ì™„ì„±ëœ `cli.js` ì½”ë“œë¥¼ ì œê³µí•´ ë“œë¦½ë‹ˆë‹¤.

ê° ê¸°ëŠ¥ì´ ì˜¬ë°”ë¥¸ ìˆœì„œë¡œ ì‹¤í–‰ë˜ë„ë¡ `publishDraft` í•¨ìˆ˜ ë‚´ë¶€ ë¡œì§ì„ ì‹ ì¤‘í•˜ê²Œ êµ¬ì„±í–ˆìŠµë‹ˆë‹¤.

### ì‚¬ì „ ì¤€ë¹„ ì‚¬í•­

1.  **í•„ìš”í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì„¤ì¹˜í•˜ì„¸ìš”.**
    ```bash
    npm install inquirer simple-git crypto-js
    ```

2.  **ì„¤ì • íŒŒì¼ì„ ìƒì„±í•˜ì„¸ìš”.**
    *   **`config.json`**: ì¹´í…Œê³ ë¦¬ ë° íƒœê·¸ ëª©ë¡ì„ ì •ì˜í•©ë‹ˆë‹¤.
      ```json
      {
        "categories": ["Tech", "Life", "Programming"],
        "tags": ["Jekyll", "NodeJS", "Web", "Essay"]
      }
      ```
    *   **`password.json`**: ì•”í˜¸í™”ì— ì‚¬ìš©í•  í‚¤ë¥¼ ì •ì˜í•©ë‹ˆë‹¤.
      ```json
      {
        "keys": {
          "private": "my-super-secret-key-123",
          "friends_only": "another-password-for-friends"
        }
      }
      ```

---

### ìµœì¢… `cli.js` ì½”ë“œ

```javascript
#!/usr/bin/env node

/**
 * Jekyll ë¸”ë¡œê·¸ í¬ìŠ¤íŠ¸ ê´€ë¦¬ë¥¼ ìœ„í•œ CLI ìœ í‹¸ë¦¬í‹°
 *
 * ê¸°ëŠ¥:
 * 1. ìƒˆë¡œìš´ ì´ˆì•ˆ ìƒì„± (í¬ìŠ¤íŠ¸ë³„ í´ë” êµ¬ì¡°)
 * 2. ì´ˆì•ˆ ë°œí–‰ (ì´ë¯¸ì§€ CDN ë¶„ë¦¬, ê²½ë¡œ ìë™ ë³€í™˜, í—¤ë” ì´ë¯¸ì§€ ì¶”ê°€, ì„ íƒì  ì•”í˜¸í™”)
 * 3. _tabs í´ë” ë‚´ìš© ë°°í¬
 */

import inquirer from 'inquirer';
import fs from 'fs';
import path from 'path';
import simpleGit from 'simple-git';
import CryptoJS from 'crypto-js';

// --- ìƒìˆ˜ ì •ì˜ ---
const DRAFTS_DIR = '_drafts';
const POSTS_DIR = '_posts';
const TABS_DIR = '_tabs';
const CDN_IMG_DIR = path.join('cdn', 'img'); // ì‹¤ì œ íŒŒì¼ì´ ì €ì¥ë  ë¬¼ë¦¬ì  ê²½ë¡œ
const URL_IMG_PREFIX = '/img'; // ë§ˆí¬ë‹¤ìš´ì— ì‚½ì…ë  URL ê²½ë¡œ ì ‘ë‘ì‚¬
const CONFIG_PATH = 'config.json';
const PASSWORD_PATH = 'password.json';
const git = simpleGit();

// --- ë„ìš°ë¯¸ í•¨ìˆ˜ ---
async function gitConfig() {
  await git.addConfig('user.name', 'granberia');
  await git.addConfig('user.email', 'reptilesax@gmail.com');
}

function slugify(title) {
  return title.trim().replace(/\s+/g, '-').replace(/-+/g, '-');
}

function getFormattedDate() {
  const date = new Date();
  const year = date.getFullYear();
  const month = String(date.getMonth() + 1).padStart(2, '0');
  const day = String(date.getDate()).padStart(2, '0');
  return `${year}-${month}-${day}`;
}

function getFullDateTime() {
  const date = new Date();
  const offset = -date.getTimezoneOffset();
  const offsetHours = String(Math.floor(Math.abs(offset) / 60)).padStart(2, '0');
  const offsetMinutes = String(Math.abs(offset) % 60).padStart(2, '0');
  const sign = offset >= 0 ? '+' : '-';

  return `${date.getFullYear()}-${String(date.getMonth() + 1).padStart(2,'0')}-${String(date.getDate()).padStart(2,'0')} ${String(date.getHours()).padStart(2,'0')}:${String(date.getMinutes()).padStart(2,'0')}:${String(date.getSeconds()).padStart(2,'0')} ${sign}${offsetHours}${offsetMinutes}`;
}

// --- í•µì‹¬ ê¸°ëŠ¥ í•¨ìˆ˜ ---

async function createDraft() {
  let config, passwords;
  try {
    config = JSON.parse(fs.readFileSync(CONFIG_PATH, 'utf-8'));
    passwords = JSON.parse(fs.readFileSync(PASSWORD_PATH, 'utf-8'));
    if (!passwords.keys || Object.keys(passwords.keys).length === 0) {
      throw new Error('password.jsonì— ìœ íš¨í•œ í‚¤ê°€ ì—†ìŠµë‹ˆë‹¤.');
    }
  } catch (error) {
    console.error(`âŒ ì„¤ì • íŒŒì¼ ë˜ëŠ” ë¹„ë°€ë²ˆí˜¸ íŒŒì¼ì„ ì½ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: ${error.message}`);
    return;
  }

  const answers = await inquirer.prompt([
    {
      type: 'input',
      name: 'title',
      message: 'ğŸ“ í¬ìŠ¤íŠ¸ ì œëª©ì„ ì…ë ¥í•˜ì„¸ìš”:',
      validate: (input) => (input ? true : 'ì œëª©ì€ ë¹„ì›Œë‘˜ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.'),
    },
    {
      type: 'checkbox',
      name: 'categories',
      message: 'ğŸ“‚ ì¹´í…Œê³ ë¦¬ë¥¼ ì„ íƒí•˜ì„¸ìš”:',
      choices: config.categories,
      validate: (input) => (input.length > 0 ? true : 'í•˜ë‚˜ ì´ìƒì˜ ì¹´í…Œê³ ë¦¬ë¥¼ ì„ íƒí•´ì•¼ í•©ë‹ˆë‹¤.'),
    },
    {
      type: 'checkbox',
      name: 'tags',
      message: 'ğŸ·ï¸ íƒœê·¸ë¥¼ ì„ íƒí•˜ì„¸ìš”:',
      choices: config.tags,
    },
    {
      type: 'confirm',
      name: 'isEncrypted',
      message: 'ğŸ”’ ì´ í¬ìŠ¤íŠ¸ë¥¼ ì•”í˜¸í™”í•˜ì‹œê² ìŠµë‹ˆê¹Œ?',
      default: false,
    },
    {
      type: 'list',
      name: 'keyId',
      message: 'ğŸ”‘ ì‚¬ìš©í•  ì•”í˜¸í™” í‚¤ë¥¼ ì„ íƒí•˜ì„¸ìš”:',
      choices: Object.keys(passwords.keys),
      when: (answers) => answers.isEncrypted,
    },
  ]);

  const { title, categories, tags, isEncrypted, keyId } = answers;

  const date = getFormattedDate();
  const slug = slugify(title);
  const draftDirName = `${date}-${slug}`;
  const draftDirPath = path.join(DRAFTS_DIR, draftDirName);
  const fileName = `${draftDirName}.md`;
  const filePath = path.join(draftDirPath, fileName);

  let frontMatter = `---
title: ${title}
date: ${getFullDateTime()}
categories: [${categories.join(', ')}]
tags: [${tags.join(', ')}]
`;

  if (isEncrypted) {
    frontMatter += `encrypt: true\nkey_id: ${keyId}\n`;
  }
  const fileContent = `${frontMatter}---\n\n`;

  fs.mkdirSync(draftDirPath, { recursive: true });
  console.log(`ğŸ“ ì´ˆì•ˆ í´ë”ë¥¼ ìƒì„±í–ˆìŠµë‹ˆë‹¤: ${draftDirPath}`);

  fs.writeFileSync(filePath, fileContent);
  console.log(`âœ… ì´ˆì•ˆ íŒŒì¼ì´ ì„±ê³µì ìœ¼ë¡œ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤: ${filePath}`);
  console.log(`ğŸ’¡ ì´ë¯¸ì§€ëŠ” '${draftDirPath}' í´ë” ì•ˆì— ë„£ê³ , ë§ˆí¬ë‹¤ìš´ì—ì„œëŠ” './ì´ë¯¸ì§€.png' ì™€ ê°™ì´ ìƒëŒ€ ê²½ë¡œë¡œ ì‚¬ìš©í•˜ì„¸ìš”.`);
}

async function publishDraft() {
  if (!fs.existsSync(DRAFTS_DIR)) {
    console.log('ğŸ¤· ì´ˆì•ˆ í´ë”ê°€ ì—†ìŠµë‹ˆë‹¤.');
    return;
  }
  const draftDirs = fs.readdirSync(DRAFTS_DIR, { withFileTypes: true })
    .filter((dirent) => dirent.isDirectory())
    .map((dirent) => dirent.name);

  if (draftDirs.length === 0) {
    console.log('ğŸ¤· ë°œí–‰í•  ì´ˆì•ˆì´ ì—†ìŠµë‹ˆë‹¤.');
    return;
  }

  const { dirToPublish } = await inquirer.prompt([{
    type: 'list',
    name: 'dirToPublish',
    message: 'ğŸš€ ë°œí–‰í•  ì´ˆì•ˆ í´ë”ë¥¼ ì„ íƒí•˜ì„¸ìš”:',
    choices: draftDirs,
  }]);

  const sourceDraftDir = path.join(DRAFTS_DIR, dirToPublish);
  const mdFileName = `${dirToPublish}.md`;
  const sourceMdPath = path.join(sourceDraftDir, mdFileName);
  
  const destMdPath = path.join(POSTS_DIR, mdFileName);
  const destCdnDir = path.join(CDN_IMG_DIR, dirToPublish);

  if (!fs.existsSync(sourceMdPath)) {
    console.error(`âŒ ì˜¤ë¥˜: ë§ˆí¬ë‹¤ìš´ íŒŒì¼(${sourceMdPath})ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.`);
    return;
  }

  // --- í¬ìŠ¤íŠ¸ ë‚´ìš© ì²˜ë¦¬ (ìˆœì„œê°€ ë§¤ìš° ì¤‘ìš”) ---
  let originalContent = fs.readFileSync(sourceMdPath, 'utf-8');
  let contentForPublishing = originalContent;

  // 1. í—¤ë” ì´ë¯¸ì§€ ì¶”ê°€
  const firstImageRegex = /!\[(.*?)\]\(\s*(\.\/)?(.*?)\s*\)/;
  const firstImageMatch = firstImageRegex.exec(contentForPublishing);

  if (firstImageMatch) {
    const altText = firstImageMatch[1].replace(/"/g, '\\"');
    const imageFileName = firstImageMatch[3];
    const headerImagePath = `${URL_IMG_PREFIX}/${dirToPublish}/${imageFileName}`;
    const imageFrontMatter = `image:\n  path: ${headerImagePath}\n  alt: "${altText}"\n`;

    const parts = contentForPublishing.split('---');
    contentForPublishing = `---${parts[1]}${imageFrontMatter}---${parts.slice(2).join('---')}`;
    console.log('âœ… í—¤ë” ì´ë¯¸ì§€ë¥¼ Front Matterì— ì¶”ê°€í–ˆìŠµë‹ˆë‹¤.');
  }

  // 2. ë³¸ë¬¸ ì´ë¯¸ì§€ ê²½ë¡œ ì „ì²´ ë³€í™˜
  const imagePathRegex = /!\[(.*?)\]\(\s*(\.\/|\.\.\/)?(.*?)\s*\)/g;
  const newImagePathPrefix = `${URL_IMG_PREFIX}/${dirToPublish}`;
  contentForPublishing = contentForPublishing.replace(imagePathRegex, `![$1](${newImagePathPrefix}/$3)`);
  console.log('âœ… ë³¸ë¬¸ ì´ë¯¸ì§€ ê²½ë¡œë¥¼ ìµœì¢… URLë¡œ ë³€ê²½í–ˆìŠµë‹ˆë‹¤.');

  // 3. ì•”í˜¸í™” (ëª¨ë“  ë‚´ìš© ë³€ê²½ í›„ ë§ˆì§€ë§‰ì— ìˆ˜í–‰)
  let [_, frontMatterString, body] = contentForPublishing.split(/---(.*?)---/s);
  const isEncrypted = /encrypt:\s*true/.test(frontMatterString);
  
  if (isEncrypted) {
    const keyIdMatch = /key_id:\s*(.*)/.exec(frontMatterString);
    if (keyIdMatch) {
      const keyId = keyIdMatch[1].trim();
      try {
        const passwords = JSON.parse(fs.readFileSync(PASSWORD_PATH, 'utf-8'));
        const secretKey = passwords.keys[keyId];
        if (!secretKey) throw new Error(`'${keyId}' í‚¤ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.`);
        
        body = CryptoJS.AES.encrypt(body.trim(), secretKey).toString();
        console.log('ğŸ”’ í¬ìŠ¤íŠ¸ ë³¸ë¬¸ì„ ì„±ê³µì ìœ¼ë¡œ ì•”í˜¸í™”í–ˆìŠµë‹ˆë‹¤.');
      } catch (error) {
        console.error(`âŒ ì•”í˜¸í™” ì¤‘ ì˜¤ë¥˜ ë°œìƒ: ${error.message}`);
        return;
      }
    }
  }

  const finalContent = `---${frontMatterString}---\n${body}`;

  // --- íŒŒì¼ ì‹œìŠ¤í…œ ì‘ì—… ---
  if (!fs.existsSync(POSTS_DIR)) fs.mkdirSync(POSTS_DIR);
  fs.writeFileSync(destMdPath, finalContent);
  console.log(`âœ… ë§ˆí¬ë‹¤ìš´ íŒŒì¼ ë°œí–‰ ì™„ë£Œ: ${destMdPath}`);

  const assetFiles = fs.readdirSync(sourceDraftDir).filter((file) => file !== mdFileName);
  if (assetFiles.length > 0) {
    if (!fs.existsSync(destCdnDir)) fs.mkdirSync(destCdnDir, { recursive: true });
    for (const asset of assetFiles) {
      fs.renameSync(path.join(sourceDraftDir, asset), path.join(destCdnDir, asset));
    }
    console.log(`ğŸ–¼ï¸  ì´ë¯¸ì§€ íŒŒì¼ë“¤ì„ ì´ë™í–ˆìŠµë‹ˆë‹¤: ${destCdnDir}`);
  }

  fs.rmSync(sourceDraftDir, { recursive: true, force: true });
  console.log(`ğŸ—‘ï¸  ì›ë³¸ ì´ˆì•ˆ í´ë”ë¥¼ ì‚­ì œí–ˆìŠµë‹ˆë‹¤: ${sourceDraftDir}`);

  // --- Git ì‘ì—… ---
  try {
    console.log('ğŸ“¦ Gitì— ë³€ê²½ì‚¬í•­ì„ ì»¤ë°‹í•˜ê³  í‘¸ì‹œí•©ë‹ˆë‹¤...');
    await gitConfig();
    await git.add([destMdPath, destCdnDir]);
    await git.commit(`feat: publish new post - ${dirToPublish}`);
    await git.push();
    console.log('ğŸ‰ í¬ìŠ¤íŠ¸ ë°œí–‰ì´ ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!');
  } catch (error) {
    console.error('âŒ Git ì‘ì—… ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤:', error.message);
  }
}

async function updateTabs() {
  if (!fs.existsSync(TABS_DIR)) {
    console.log(`ğŸ¤· '${TABS_DIR}' í´ë”ê°€ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.`);
    return;
  }
  try {
    console.log(`ğŸ“¦ '${TABS_DIR}' í´ë”ì˜ ë³€ê²½ì‚¬í•­ì„ ë°°í¬í•©ë‹ˆë‹¤...`);
    await gitConfig();
    await git.add(TABS_DIR);
    await git.commit('chore: deploy tabs');
    await git.push();
    console.log(`ğŸ‰ '${TABS_DIR}' í´ë” ë°°í¬ê°€ ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!`);
  } catch (error) {
    if (error.message.includes('nothing to commit')) {
      console.log('ğŸ¤· ì»¤ë°‹í•  ë³€ê²½ì‚¬í•­ì´ ì—†ìŠµë‹ˆë‹¤.');
    } else {
      console.error('âŒ Git ì‘ì—… ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤:', error.message);
    }
  }
}

// --- ë©”ì¸ ì‹¤í–‰ í•¨ìˆ˜ ---
async function main() {
  const { action } = await inquirer.prompt([{
    type: 'list',
    name: 'action',
    message: 'ğŸ‘‹ ì•ˆë…•í•˜ì„¸ìš”! ë¬´ì—‡ì„ ë„ì™€ë“œë¦´ê¹Œìš”?',
    choices: [
      { name: 'ìƒˆë¡œìš´ ì´ˆì•ˆ ì‘ì„±í•˜ê¸°', value: 'draft' },
      { name: 'ì´ˆì•ˆì„ í¬ìŠ¤íŠ¸ë¡œ ë°œí–‰í•˜ê¸°', value: 'publish' },
      { name: 'ì „ì²´ íƒ­ì„ ë°°í¬í•˜ê¸°', value: 'update' },
      new inquirer.Separator(),
      { name: 'ì¢…ë£Œ', value: 'exit' },
    ],
  }]);

  switch (action) {
    case 'draft':
      await createDraft();
      break;
    case 'publish':
      await publishDraft();
      break;
    case 'update':
      await updateTabs();
      break;
    case 'exit':
      console.log('ğŸ‘‹ ë‹¤ìŒì— ë˜ ë§Œë‚˜ìš”!');
      break;
  }
}

main();
```

</details>
<br>

Jekyll ë¸”ë¡œê·¸ í¬ìŠ¤íŠ¸ ì „ì²´ì˜ ë ˆì´ì•„ì›ƒì„ ë°”ê¿”ì£¼ë ¤ë©´ post.htmlì„ ìˆ˜ì •í•˜ë©´ ë˜ëŠ”êµ¬ë‚˜.

ì—¬ê¸°ì— ì•”í˜¸í™” ì—¬ë¶€ë¡œ ë¶„ê¸°ë˜ê²Œë” ì²˜ë¦¬í•˜ë©´ ë˜ëŠ” ê²ƒ ê°™ë‹¤.

ê·¸ ê³¼ì •ì—ì„œ ì œë¯¸ë‹ˆê°€ Liquid ë¬¸ë²•ì— ìµìˆ™í•˜ì§€ ì•Šì€ì§€ ì£¼ì„ì„ ì´ìƒí•˜ê²Œ ë„£ì—ˆë‹¤ê°€ ì•„ë˜ì™œ ê°™ì€ ì°¸ì‚¬ê°€ ë²Œì–´ì§€ê¸°ë„ í–ˆì§€ë§Œ...

![alt text](/img/2025-10-20-ë¸”ë¡œê·¸ì—-í¬ìŠ¤íŠ¸-ì•”í˜¸í™”-ê¸°ëŠ¥-ë§Œë“¤ê¸°/image.png)

ì´ë ‡ê²Œ í•œ ì¤„ ë’¤ë¡œ í†µì§¸ë¡œ ì£¼ì„ìœ¼ë¡œ ë°”ë€ë‹¤ê±°ë‚˜ í•˜ëŠ” ë¬¸ì œ ì™¸ì—ë„ ë³µí˜¸í™”ê°€ ì˜¬ë°”ë¥´ê²Œ ë˜ì§€ ì•Šì•„ ì›ë¬¸ì´ ì†ìƒë˜ì—ˆë‚˜ í™•ì¸í•˜ëŠ” ê³¼ì •ì—ì„œ ì•„ë˜ì™€ ê°™ì€ í•´ê²°ì±…ë„ ì ìš©í•´ì•¼ í–ˆë‹¤.

### ì œë¯¸ë‹ˆ 2.5 Proì˜ ê²°ê³¼ë¬¼

<details markdown="1">
<summary>ì ‘ê¸°/í´ê¸°</summary>

### : `jsonify` í•„í„° ì‚¬ìš© ë° `capture` íƒœê·¸ë¡œ ì•ˆì •ì„± í™•ë³´

ì˜ëª»ëœ í•„í„° ì´ë¦„ì„ ë°”ë¡œì¡ëŠ” ê²ƒê³¼ ë”ë¶ˆì–´, í•œ ë‹¨ê³„ ë” ë‚˜ì•„ê°€ `capture`ë¼ëŠ” Liquid íƒœê·¸ë¥¼ ì‚¬ìš©í•˜ì—¬ ì´ ê³¼ì •ì„ ë”ìš± ì•ˆì •ì ìœ¼ë¡œ ë§Œë“¤ê² ìŠµë‹ˆë‹¤. `capture` íƒœê·¸ëŠ” Liquid ì²˜ë¦¬ ê²°ê³¼ë¥¼ ë³€ìˆ˜ì— ì•ˆì „í•˜ê²Œ ë‹´ì•„ì£¼ëŠ” ì—­í• ì„ í•©ë‹ˆë‹¤.

#### ìˆ˜ì •í•  ì½”ë“œ

**ê¸°ì¡´ ì½”ë“œ:**
```javascript
const encryptedData = {{ content | strip_html | json }};
```

**â˜…â˜…â˜… ìµœì¢… ìˆ˜ì • ì½”ë“œ â˜…â˜…â˜…**

`post.html`ì˜ `<script>` íƒœê·¸ **ë°”ë¡œ ìœ„**ì™€ **ë‚´ë¶€**ë¥¼ ì•„ë˜ì™€ ê°™ì´ ìˆ˜ì •í•´ì£¼ì„¸ìš”.

```html
<!-- ... ë‹¤ë¥¸ HTML ì½”ë“œ ... -->

{%- comment -%}
  1. contentì—ì„œ HTML íƒœê·¸ì™€ ì•ë’¤ ê³µë°±ì„ ëª¨ë‘ ì œê±°í•˜ê³ ,
     ê·¸ ê²°ê³¼ë¥¼ 'encrypted_string'ì´ë¼ëŠ” ë³€ìˆ˜ì— ì €ì¥í•©ë‹ˆë‹¤.
{%- endcomment -%}
{%- capture encrypted_string -%}{{ content | strip_html | strip }}{%- endcapture -%}

<script>
  document.addEventListener('DOMContentLoaded', () => {
    if (document.getElementById('decryption-wrapper')) {
      const decryptForm = document.getElementById('decrypt-form');
      const passwordInput = document.getElementById('password-input');
      
      // 2. ìœ„ì—ì„œ ìº¡ì²˜í•œ ë³€ìˆ˜ë¥¼ 'jsonify' í•„í„°ë¡œ ì•ˆì „í•˜ê²Œ ì¶œë ¥í•©ë‹ˆë‹¤.
      const encryptedData = {{ encrypted_string | jsonify }};
      
      const decryptAndDisplay = () => {
        // ... ì´í•˜ ë³µí˜¸í™” ë¡œì§ì€ ë™ì¼ ...
// ... ì´í•˜ ì½”ë“œ ë™ì¼ ...
```

### ì™œ ì´ë ‡ê²Œ í•´ì•¼ í•˜ëŠ”ê°€?

1.  **`jsonify` í•„í„°**: ì´ê²ƒì´ Jekyllì—ì„œ ë¬¸ìì—´ì„ ì˜¬ë°”ë¥¸ JSON í˜•ì‹(í°ë”°ì˜´í‘œë¡œ ê°ì‹¸ê³  ë‚´ë¶€ íŠ¹ìˆ˜ë¬¸ìë¥¼ ì´ìŠ¤ì¼€ì´í”„)ìœ¼ë¡œ ë³€í™˜í•´ì£¼ëŠ” **ì˜¬ë°”ë¥¸ í•„í„°**ì…ë‹ˆë‹¤.
2.  **`capture` íƒœê·¸**: `<script>` íƒœê·¸ ì•ˆì—ì„œ ë³µì¡í•œ Liquid í•„í„° ì²´ì¸ì„ ì§ì ‘ ì‚¬ìš©í•˜ëŠ” ê²ƒì€ ë•Œë•Œë¡œ ì˜ˆê¸°ì¹˜ ì•Šì€ íŒŒì‹± ë¬¸ì œë¥¼ ì¼ìœ¼í‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤. `capture`ë¥¼ ì‚¬ìš©í•˜ë©´,
    *   ë¨¼ì € ìŠ¤í¬ë¦½íŠ¸ ì™¸ë¶€ì˜ ì•ˆì „í•œ ê³µê°„ì—ì„œ **ìˆœìˆ˜í•œ ì•”í˜¸ë¬¸ ë°ì´í„°**ë¥¼ `encrypted_string`ì´ë¼ëŠ” ë³€ìˆ˜ë¡œ ì™„ë²½í•˜ê²Œ ì¤€ë¹„í•©ë‹ˆë‹¤.
    *   ê·¸ëŸ° ë‹¤ìŒ ìŠ¤í¬ë¦½íŠ¸ ë‚´ë¶€ì—ì„œëŠ” ì´ ì¤€ë¹„ëœ ë³€ìˆ˜ë¥¼ `jsonify` í•„í„° í•˜ë‚˜ë§Œìœ¼ë¡œ ê¹”ë”í•˜ê²Œ ì¶œë ¥í•©ë‹ˆë‹¤.
    *   ì´ëŠ” ì½”ë“œì˜ ê°€ë…ì„±ì„ ë†’ì´ê³  ì ì¬ì ì¸ ì˜¤ë¥˜ë¥¼ ë°©ì§€í•˜ëŠ” ë§¤ìš° ì•ˆì •ì ì¸ ë°©ë²•ì…ë‹ˆë‹¤.
3.  **`strip` í•„í„° ì¶”ê°€**: `strip_html`ì„ ì‚¬ìš©í•œ í›„ ë‚¨ì•„ìˆì„ ìˆ˜ ìˆëŠ” ëˆˆì— ë³´ì´ì§€ ì•ŠëŠ” ì¤„ë°”ê¿ˆ ë¬¸ìë‚˜ ê³µë°±ì„ `strip` í•„í„°ë¡œ í•œë²ˆ ë” ì œê±°í•˜ì—¬ ë°ì´í„°ì˜ ìˆœìˆ˜ì„±ì„ ë³´ì¥í•©ë‹ˆë‹¤.

---

### ìˆ˜ì •ëœ `_layouts/post.html` (ì§„ì§œ ìµœì¢… ì™„ì„±ë³¸)

ì•„ë˜ëŠ” ì´ ëª¨ë“  ê²ƒì´ ì ìš©ëœ ì½”ë“œì…ë‹ˆë‹¤. ì´ì œëŠ” ì •ë§ í™•ì‹¤í•˜ê²Œ ì‘ë™í•  ê²ƒì…ë‹ˆë‹¤.

```html
---
layout: default
refactor: true
panel_includes:
  - toc
tail_includes:
  - related-posts
  - post-nav
script_includes:
  - comment
---

{% include lang.html %} {% include toc-status.html %}

<article class="px-1" data-toc="{{ enable_toc }}">
  <header>
    <!-- ... header content ... -->
    <h1 data-toc-skip>{{ page.title }}</h1>
    {% if page.description %}<p class="post-desc fw-light mb-4">{{ page.description }}</p>{% endif %}
    <div class="post-meta text-muted">
      <span>{{ site.data.locales[lang].post.posted }} {% include datetime.html date=page.date tooltip=true lang=lang %}</span>
      {% if page.last_modified_at and page.last_modified_at != page.date %}<span>{{ site.data.locales[lang].post.updated }} {% include datetime.html date=page.last_modified_at tooltip=true lang=lang %}</span>{% endif %}
      <div class="d-flex justify-content-between">
        <span>{% if page.author %}{% assign authors = page.author %}{% elsif page.authors %}{% assign authors = page.authors %}{% endif %}{{site.data.locales[lang].post.written_by }}<em>{% if authors %}{% for author in authors %}{% if site.data.authors[author].url -%}<a href="{{ site.data.authors[author].url }}">{{ site.data.authors[author].name }}</a>{%- else -%}{{ site.data.authors[author].name }}{%- endif %}{% unless forloop.last %}{{ '</em>,<em>' }}{% endunless %}{% endfor %}{% else %}<a href="{{ site.social.links[0] }}">{{ site.social.name }}</a>{% endif %}</em></span>
        <div>{% if site.pageviews.provider and site.analytics[site.pageviews.provider].id %}<span><em id="pageviews"><i class="fas fa-spinner fa-spin small"></i></em>{{ site.data.locales[lang].post.pageview_measure }}</span>{% endif %}{% include read-time.html content=content prompt=true lang=lang %}</div>
      </div>
    </div>
  </header>
  
  {% if page.encrypt %}
  <!-- [Encrypted Post] -->
  {% if enable_toc %}{% include toc.html %}{% endif %}
  <div class="content">
    <div id="decryption-wrapper" class="text-center p-4 border rounded">
      <form id="decrypt-form" onsubmit="return false;">
        <i class="fa-solid fa-lock fa-2x mb-3"></i>
        <p class="mb-3">ì´ í¬ìŠ¤íŠ¸ëŠ” ì•”í˜¸í™”ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ë‚´ìš©ì„ ë³´ë ¤ë©´ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”.</p>
        <div class="input-group mb-3 mx-auto" style="max-width: 300px;">
          <input type="password" id="password-input" class="form-control" placeholder="ë¹„ë°€ë²ˆí˜¸" aria-label="Password">
          <button id="decrypt-button" class="btn btn-primary" type="submit">í™•ì¸</button>
        </div>
        <p id="error-message" class="text-danger small" style="display: none;">ë¹„ë°€ë²ˆí˜¸ê°€ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤.</p>
      </form>
    </div>
    <div id="decrypted-content" style="display: none;"></div>
  </div>

  {%- capture encrypted_string -%}{{ content | strip_html | strip }}{%- endcapture -%}

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      if (document.getElementById('decryption-wrapper')) {
        const decryptForm = document.getElementById('decrypt-form');
        const passwordInput = document.getElementById('password-input');
        
        const encryptedData = {{ encrypted_string | jsonify }};
        
        const decryptAndDisplay = () => {
          const secretKey = passwordInput.value;
          const errorMessage = document.getElementById('error-message');
          if (!secretKey) return;
          try {
            const decryptedBytes = CryptoJS.AES.decrypt(encryptedData, secretKey);
            const decryptedText = decryptedBytes.toString(CryptoJS.enc.Utf8);
            if (decryptedText) {
              const decryptedContent = document.getElementById('decrypted-content');
              decryptedContent.innerHTML = decryptedText;
              document.getElementById('decryption-wrapper').style.display = 'none';
              decryptedContent.style.display = 'block';
              if (typeof window.toc !== 'undefined') {
                window.toc.init();
              }
            } else {
              throw new Error('Decryption resulted in empty content.');
            }
          } catch (e) {
            errorMessage.style.display = 'block';
            passwordInput.focus();
            console.error('Decryption failed:', e);
          }
        };
        decryptForm.addEventListener('submit', decryptAndDisplay);
      }
    });
  </script>

  {% else %}
  <!-- [Normal Post] -->
    {% if enable_toc %}{% include toc.html %}{% endif %}
    <div class="content">{{ content }}</div>
  {% endif %}
  
  <div class="post-tail-wrapper text-muted">
    <!-- ... post-tail-wrapper content ... -->
    {% if page.categories.size > 0 %}<div class="post-meta mb-3"><i class="far fa-folder-open fa-fw me-1"></i>{% for category in page.categories %}<a href="{{ site.baseurl }}/categories/{{ category | slugify | url_encode }}/">{{ category }}</a>{%- unless forloop.last -%},{%- endunless -%}{% endfor %}</div>{% endif %}
    {% if page.tags.size > 0 %}<div class="post-tags"><i class="fa fa-tags fa-fw me-1"></i>{% for tag in page.tags %}<a href="{{ site.baseurl }}/tags/{{ tag | slugify | url_encode }}/" class="post-tag no-text-decoration">{{- tag -}}</a>{% endfor %}</div>{% endif %}
    <div class="post-tail-bottom d-flex justify-content-between align-items-center mt-5 pb-2">
      <div class="license-wrapper">{% if site.data.locales[lang].copyright.license.template %}{% capture _replacement %}<a href="{{ site.data.locales[lang].copyright.license.link }}">{{ site.data.locales[lang].copyright.license.name }}</a>{% endcapture %}{{ site.data.locales[lang].copyright.license.template | replace: ':LICENSE_NAME', _replacement }}{% endif %}</div>
      {% include post-sharing.html lang=lang %}
    </div>
  </div>
</article>
```

</details>
<br>

ê·¸ ì™¸ì—ë„ ì•”í˜¸í™”ëœ ë‚´ìš©ì„ ë³µí˜¸í™”í–ˆë”ë‹ˆ ì¤„ë‚´ë¦¼ì´ ì—†ì–´ì§€ëŠ” ë¬¸ì œë„ ìˆì–´ì„œ íŒŒì•…í•´ë³´ì•˜ë”ë‹ˆ ë§ˆí¬ë‹¤ìš´ ì•”í˜¸í™” ìª½ ë¬¸ì œì—¬ì„œ ì´ëŸ° ë‹µë³€ì„ ë°›ì•„ì„œ í•´ê²°í•˜ê¸°ë„ í–ˆë‹¤.

### ì œë¯¸ë‹ˆ 2.5 Proì˜ ê²°ê³¼ë¬¼

<details markdown="1">
<summary>ì ‘ê¸°/í´ê¸°</summary>

ë„¤, ì´ê²ƒì€ ì´ ì•”í˜¸í™” ê¸°ëŠ¥ì˜ ê°€ì¥ í•µì‹¬ì ì¸ ë‚œê´€ì´ì, ë°˜ë“œì‹œ í•´ê²°í•´ì•¼ í•  ë¬¸ì œì…ë‹ˆë‹¤. ë§ì”€í•˜ì‹  ëŒ€ë¡œ, í˜„ì¬ êµ¬ì¡°ì—ì„œëŠ” ì¤„ë°”ê¿ˆ(`\n`)ì´ ì œëŒ€ë¡œ ì²˜ë¦¬ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.

### ë¬¸ì œì˜ ì§„ì§œ ì›ì¸

í˜„ì¬ ë°ì´í„° ì²˜ë¦¬ íë¦„ì„ ë‹¤ì‹œ ì§šì–´ë³´ë©´ ì›ì¸ì´ ëª…í™•í•´ì§‘ë‹ˆë‹¤.

1.  **`cli.js` (ì•”í˜¸í™”)**: í¬ìŠ¤íŠ¸ì˜ **ìˆœìˆ˜í•œ ë§ˆí¬ë‹¤ìš´(Markdown) í…ìŠ¤íŠ¸**ë¥¼ ì•”í˜¸í™”í•©ë‹ˆë‹¤. ì—¬ê¸°ì—ëŠ” `## ì œëª©`ì´ë‚˜ `* ëª©ë¡`, ê·¸ë¦¬ê³  ë‹¨ìˆœ ì¤„ë°”ê¿ˆ ë¬¸ì(`\n`)ê°€ í¬í•¨ë©ë‹ˆë‹¤.
2.  **Jekyll (ë¹Œë“œ)**: ì•”í˜¸í™”ëœ ë¬¸ìì—´ì„ ë§ˆí¬ë‹¤ìš´ìœ¼ë¡œ ì²˜ë¦¬í•˜ì§€ ëª»í•˜ê³ , ê·¸ëƒ¥ í•˜ë‚˜ì˜ í…ìŠ¤íŠ¸ ë©ì–´ë¦¬ë¡œ ì¸ì‹í•˜ì—¬ `<p>` íƒœê·¸ë¡œ í•œë²ˆ ê°ìŒ‰ë‹ˆë‹¤.
3.  **ë¸Œë¼ìš°ì € (ë³µí˜¸í™”)**:
    *   `<p>` íƒœê·¸ë¥¼ ë²—ê²¨ë‚´ê³  ìˆœìˆ˜ ì•”í˜¸ë¬¸ì„ ì–»ìŠµë‹ˆë‹¤.
    *   ë³µí˜¸í™”ë¥¼ ìˆ˜í–‰í•©ë‹ˆë‹¤. ê²°ê³¼ë¬¼(`decryptedText`)ì€ ë‹¤ì‹œ **ìˆœìˆ˜í•œ ë§ˆí¬ë‹¤ìš´ í…ìŠ¤íŠ¸**ê°€ ë©ë‹ˆë‹¤.
    *   `decryptedContent.innerHTML = decryptedText;`ë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤.

ë°”ë¡œ **ë§ˆì§€ë§‰ 3ë‹¨ê³„ê°€ ë¬¸ì œ**ì…ë‹ˆë‹¤. ë¸Œë¼ìš°ì €ëŠ” `innerHTML`ì— ë§ˆí¬ë‹¤ìš´ ë¬¸ë²•ì„ ì „ë‹¬í•´ë„ ê·¸ê²ƒì´ ë¬´ì—‡ì¸ì§€ ì•Œì§€ ëª»í•©ë‹ˆë‹¤. ë¸Œë¼ìš°ì €ê°€ ì•„ëŠ” ê²ƒì€ HTML ë¿ì…ë‹ˆë‹¤.

*   `## ì œëª©`ì€ ê·¸ëƒ¥ ê¸€ìê°€ í° í…ìŠ¤íŠ¸ê°€ ì•„ë‹ˆë¼ `<h2>ì œëª©</h2>`ì´ ë˜ì–´ì•¼ í•©ë‹ˆë‹¤.
*   ì¤„ë°”ê¿ˆ ë¬¸ì `\n`ì€ HTMLì—ì„œ ë‹¨ìˆœí•œ ê³µë°±ìœ¼ë¡œ ì²˜ë¦¬ë  ë¿, `<br>`ì´ë‚˜ `<p>` íƒœê·¸ê°€ ì—†ìœ¼ë©´ ì¤„ì´ ë°”ë€Œì§€ ì•ŠìŠµë‹ˆë‹¤.

### í•´ê²°ì±…: ì•”í˜¸í™” ì „ì— HTMLë¡œ ë³€í™˜í•˜ê¸°

ê°€ì¥ í™•ì‹¤í•˜ê³  ì˜¬ë°”ë¥¸ í•´ê²°ì±…ì€ **í´ë¼ì´ì–¸íŠ¸(ë¸Œë¼ìš°ì €)ì˜ ë¶€ë‹´ì„ ëœì–´ì£¼ëŠ” ê²ƒ**ì…ë‹ˆë‹¤. ì¦‰, `cli.js`ì—ì„œ ë§ˆí¬ë‹¤ìš´ì„ **HTMLë¡œ ë³€í™˜í•œ ë’¤ì— ê·¸ HTMLì„ ì•”í˜¸í™”**í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.

ì´ë ‡ê²Œ í•˜ë©´ ë¸Œë¼ìš°ì €ëŠ” ë³µí˜¸í™” í›„ì— ì™„ì„±ëœ HTMLì„ ë°›ê²Œ ë˜ë¯€ë¡œ, `innerHTML`ì— ë„£ê¸°ë§Œ í•˜ë©´ ëª¨ë“  ì„œì‹(ì œëª©, ëª©ë¡, ì¤„ë°”ê¿ˆ ë“±)ì´ ì™„ë²½í•˜ê²Œ ë Œë”ë§ë©ë‹ˆë‹¤.

ì´ ì‘ì—…ì„ ìœ„í•´ Node.jsìš© Markdown íŒŒì„œ ë¼ì´ë¸ŒëŸ¬ë¦¬ì¸ **`marked`**ë¥¼ ì‚¬ìš©í•˜ê² ìŠµë‹ˆë‹¤.

---

### ë‹¨ê³„ë³„ í•´ê²° ì ˆì°¨

#### 1ë‹¨ê³„: `marked` ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¤ì¹˜

í„°ë¯¸ë„ì—ì„œ í”„ë¡œì íŠ¸ì— `marked`ë¥¼ ì„¤ì¹˜í•©ë‹ˆë‹¤.

```bash
npm install marked
```

#### 2ë‹¨ê³„: `cli.js` ìˆ˜ì •

`publishDraft` í•¨ìˆ˜ì—ì„œ, ë³¸ë¬¸ì„ ì•”í˜¸í™”í•˜ê¸° ì§ì „ì— `marked`ë¥¼ ì‚¬ìš©í•˜ì—¬ HTMLë¡œ ë³€í™˜í•˜ëŠ” ì½”ë“œë¥¼ í•œ ì¤„ ì¶”ê°€í•©ë‹ˆë‹¤.

```javascript
// cli.js ìƒë‹¨ì— import ì¶”ê°€
import { marked } from 'marked';

// ...

// publishDraft í•¨ìˆ˜ ë‚´ë¶€ ìˆ˜ì •
async function publishDraft() {
  // ... í•¨ìˆ˜ ì•ë¶€ë¶„ì€ ë™ì¼ ...

  // 3. ì•”í˜¸í™” (ëª¨ë“  ë‚´ìš© ë³€ê²½ í›„ ë§ˆì§€ë§‰ì— ìˆ˜í–‰)
  let [, frontMatterString, body] = contentForPublishing.split(/---(.*?)---/s);
  const isEncrypted = /encrypt:\s*true/.test(frontMatterString);
  
  if (isEncrypted) {
    const keyIdMatch = /key_id:\s*(.*)/.exec(frontMatterString);
    if (keyIdMatch) {
      const keyId = keyIdMatch[1].trim();
      try {
        const passwords = JSON.parse(fs.readFileSync(PASSWORD_PATH, 'utf-8'));
        const secretKey = passwords.keys[keyId];
        if (!secretKey) throw new Error(`'${keyId}' í‚¤ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.`);
        
        // â˜…â˜…â˜…â˜…â˜… í•µì‹¬ ìˆ˜ì • ë¶€ë¶„ â˜…â˜…â˜…â˜…â˜…
        // ë§ˆí¬ë‹¤ìš´ ë³¸ë¬¸ì„ HTMLë¡œ ë³€í™˜í•©ë‹ˆë‹¤.
        const bodyAsHtml = marked.parse(body.trim());
        
        // ë³€í™˜ëœ HTMLì„ ì•”í˜¸í™”í•©ë‹ˆë‹¤.
        body = CryptoJS.AES.encrypt(bodyAsHtml, secretKey).toString();
        // â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…

        console.log('ğŸ”’ í¬ìŠ¤íŠ¸ ë³¸ë¬¸ì„ ì„±ê³µì ìœ¼ë¡œ ì•”í˜¸í™”í–ˆìŠµë‹ˆë‹¤.');
      } catch (error) {
        console.error(`âŒ ì•”í˜¸í™” ì¤‘ ì˜¤ë¥˜ ë°œìƒ: ${error.message}`);
        return;
      }
    }
  }

  const finalContent = `---${frontMatterString}---\n${body}`;

  // ... ì´í•˜ íŒŒì¼ ì‹œìŠ¤í…œ ë° Git ì‘ì—…ì€ ë™ì¼ ...
}
```

#### 3ë‹¨ê³„: `_layouts/post.html` í™•ì¸ (ìˆ˜ì • ë¶ˆí•„ìš”)

`_layouts/post.html`ì˜ JavaScript ì½”ë“œëŠ” ì´ë¯¸ ì™„ë²½í•˜ê²Œ ì¤€ë¹„ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ë³µí˜¸í™”ëœ ê²°ê³¼ë¬¼(`decryptedText`)ì´ ì´ì œ HTMLì´ë¯€ë¡œ, `decryptedContent.innerHTML = decryptedText;`ëŠ” ì˜ë„í•œ ëŒ€ë¡œ ì •í™•í•˜ê²Œ ì‘ë™í•  ê²ƒì…ë‹ˆë‹¤.

### ìƒˆë¡œìš´ ì›Œí¬í”Œë¡œìš°

1.  **`publish` ì‹¤í–‰**: `cli.js`ê°€ ë§ˆí¬ë‹¤ìš´ ë³¸ë¬¸ì„ ì½ìŠµë‹ˆë‹¤.
2.  ì´ë¯¸ì§€ ê²½ë¡œ ë“±ì„ ìˆ˜ì •í•œ í›„, `marked.parse()`ë¥¼ í˜¸ì¶œí•˜ì—¬ ë§ˆí¬ë‹¤ìš´ ë³¸ë¬¸ì„ **ì™„ì „í•œ HTML ë¬¸ìì—´ë¡œ ë³€í™˜**í•©ë‹ˆë‹¤. (ì´ë•Œ `\n\n`ëŠ” `<p>` íƒœê·¸ë¡œ, `##`ëŠ” `<h2>` íƒœê·¸ë¡œ ë°”ë€ë‹ˆë‹¤.)
3.  ì´ **HTML ë¬¸ìì—´**ì„ ì•”í˜¸í™”í•©ë‹ˆë‹¤.
4.  Jekyllì€ ì´ ì•”í˜¸í™”ëœ ë¬¸ìì—´ì„ ë¹Œë“œí•©ë‹ˆë‹¤.
5.  **ë¸Œë¼ìš°ì €**:
    *   ì‚¬ìš©ìê°€ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•©ë‹ˆë‹¤.
    *   ì•”í˜¸ë¬¸ì„ ë³µí˜¸í™”í•˜ë©´ **HTML ë¬¸ìì—´**ì´ ë‚˜ì˜µë‹ˆë‹¤.
    *   ì´ HTML ë¬¸ìì—´ì„ `innerHTML`ì— í• ë‹¹í•˜ë©´, ëª¨ë“  ì„œì‹ì´ ì™„ë²½í•˜ê²Œ ì ìš©ëœ ì±„ë¡œ í™”ë©´ì— í‘œì‹œë©ë‹ˆë‹¤.

ì´ ë°©ë²•ìœ¼ë¡œ ì¤„ë°”ê¿ˆë¿ë§Œ ì•„ë‹ˆë¼ ë§ˆí¬ë‹¤ìš´ìœ¼ë¡œ ì‘ì„±ëœ ëª¨ë“  ì„œì‹ì´ ì˜¬ë°”ë¥´ê²Œ í‘œì‹œë˜ëŠ” ë¬¸ì œë¥¼ ê·¼ë³¸ì ìœ¼ë¡œ í•´ê²°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

</details>
<br>

ì´ë ‡ê²Œ í•´ì„œ ì˜¤ëŠ˜ ë§Œë“¤ê³ ì í–ˆë˜ ê±´ ëª¨ë‘ ì™„ì„±.

ì´ì œ ì˜¤ëŠ˜ ìƒˆë¡œ ë°°ìš´ ê²ƒë“¤ì„ ì •ë¦¬í•´ë³´ì...
- post.htmlì„ ìˆ˜ì •í•´ì„œ ë¸”ë¡œê·¸ ì „ì²´ í¬ìŠ¤íŠ¸ì˜ ë ˆì´ì•„ì›ƒì„ ìˆ˜ì •í•˜ëŠ” ë°©ë²•.
- CryptoJSë¥¼ ì‚¬ìš©í•œ AES ì•”í˜¸í™” ë° ë³µí˜¸í™” ë°©ë²•.
- Node.jsìš© Markdown íŒŒì„œ marked ì‚¬ìš© ë°©ë²•.
