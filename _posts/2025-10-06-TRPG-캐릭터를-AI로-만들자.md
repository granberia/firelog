---
title: TRPG 캐릭터를 AI로 만들자
date: 2025-10-06 12:49:27 +0900
categories: [개발]
tags: [개발, AI 채팅]
---

생각나는 과정만 마구 적기.

- 모든 엑스페리온 세션의 로그는 github의 bookshelf 라는 저장소에 들어 있다.
- bookshelf 저장소에 유틸리티를 하나 만들자, 저장소 내부의 세션 폴더를 선택하고 그 중 html로 된 로그 파일을 선택하게 하자. 
- 선택한 세션 폴더 내에 지식 베이스 디렉터리가 없으면 KB라는 폴더를 새로 만든다.
- 만약 이미 있다면, KB 폴더의 내용을 읽어온다.
- 로그 파일을 선택하면 제미니 API를 사용해서 지식 베이스의 내용과 로그를 조합해서 지식 베이스 파일들의 내용을 최신화한다.
- 이 과정에서 로그 파일의 html로 된 내용물은 LLM이 context를 이해하기 용이하도록 정규식을 돌려 쓸데없는 div와 타임스탬프들을 지운다.
- 지식 베이스 디렉터리는 버전 관리를 위해 KB/1, KB/2 같이 세션 이름 폴더마다 파일을 따로 나누고 LLM이 새 버전의 KB를 만들었을 때 잘못된 내용을 기입했으면 사람 손으로 이전 버전과 비교해가며 수정해줄 수 있다. KB를 불러올 땐 최신 버전의 하나만 불러오게 하자.
- 이렇게 하면 지식 베이스를 최신화하는 작업이 자동화된다.
- 다음은 세션 로그들에서 특정 캐릭터의 대사만 추출하는 유틸리티를 만든다. 말투를 따라하기 위해 필요하다.
- 마찬가지로 모든 세션들에서 대사를 모두 추출한다.
- 지식 베이스로 캐릭터의 지식과 기억을 구축하고 추출된 전체 대사들을 사용하면 말투 및 성격을 재현할 수 있게 된다.

그런데, 이 과정을 진행하기 전에 엑스페리온의 세계관부터 지식 베이스로 만들어둘 필요가 있겠다...

세계를 구현하는 LLM들은 어떤 방식으로 프롬프트를 최적화하는지 리서치해보자.
